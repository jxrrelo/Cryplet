# Cryplet

## Description
Cryptocurrencies have been taking off lately so it will be interesting to see how a simple transaction could be constructed and verified cryptographically. Cryplet, or a cryptocurrency wallet, is a physical medium which stores the private/public key pairs that allows cryptocurrency transactions to take place. In addition to this basic function of storing the keys, a cryptocurrency wallet more often also offers the functionality of encrypting and/or signing information. 

## Motivations
Just like the way people keep cash or cards in a physical wallet, bitcoins and other cryptocurrencies can be thought of as being stored in a wallet that can be hardware-based or web-based. The wallet can also reside on a mobile device, on a computer desktop, or kept safe by printing the private keys and addresses used for access on paper. But how safe are any of these digital wallets? The answer to this depends on how the user manages the wallet. Every wallet contains a set of private keys without which the owner cannot access their cryptocurrency. The biggest danger in cryptocurrency security is perhaps the individual user revealing the private key or developers who did not securely implement their applications as we shall see some examples later. Without the private key, the user will never have access to his/her cryptocurrencies again. Besides this problem, a user can also lose his/her cryptocurrencies by computer malfunctions (crashing a hard drive), hacking, or simply losing the physical device where the digital wallet resides. While there are many factors that contribute to security such as smart contract bugs, this project focuses exclusively on the cryptography and its application. We start with how private keys are generated, then how public keys and addresses are subsequently derived. Then we construct a simple transaction and verify it. Finally, we examine its security and research that looks into its weaknesses.

This project focuses on 2 cryptocurrencies - Ethereum and Algorand. Both of these cryptocurrencies offer a wide range of resources that enables the expedition of the development phase, some of which include cryptographic library functions, online video explanations and research papers. Ethereum is undoubtedly one of the most popular platforms for building decentralised applications, with many high value use cases such as decentralised finance. Algorand, on the other hand, has several discussions and researches revolving around it, explaining why it is in pole position to take over the lead in the smart contract platform space. With the study of Ethereum and Algorand, this project aims to cover sufficient breadth and depth, sieving out and discussing possible similarities and differences in their security implementations.

## Research
To make private keys user friendly, both blockchains support the use of a Mnemonic phrase which performs the same function as private keys. Mnemonic phrases are a human-readable version of the private keys. The user can sign transactions and recover lost accounts using part of their mnemonic phrase. Mnemonic or seed phrases can range from 12 - 25 words depending on the blockchain ecosystem being dealt with. However, there are some notable differences that will be discussed.

### Ethereum
Private keys are generated as random 256 bits, which is 64 (hex) characters or 32 bytes. After this, Ethereum public keys (128 characters / 64 bytes) are created using an algorithm called Elliptic Curve Digital Signature Algorithm (ECDSA). Ethereum uses secp256k1 to generate public keys. Public key is a point in this Elliptic curve algorithm. In order to create Ethereum Addresses, keccak256 algorithm is applied to the x and y points on public keys.

### Algorand
Algorand uses Ed25519 (Edwards-curve Digital Signature Algorithm) high-speed, high-security elliptic-curve signatures. The keys are produced through standard, open-source cryptographic libraries packaged with each of the SDKs. The key generation algorithm takes a random value as input and outputs two 32-byte arrays, representing a public key and its associated private key. The public key is transformed into an Algorand address, by adding a 4-byte checksum to the end of the public key and then encoding it in base32. The result is what both the developer and end-user recognize as an Algorand address. The address is 58 characters long.

The Algorand blockchain supports mnemonic keys and is generated during the account sign up. It is a 25-word pattern that best represents the private key and performs the same functions as the private keys. They are easily readable and easy to memorise as well. On the Algorand blockchain chain, mnemonic keys are generated by converting the user's private key string to an 11-bit integer to the bip-0039 English word list where the integer value maps to the word in the bip-0039 English word list with position same as the integer value. To illustrate, if an integer value is 2, it will map to the 2nd word on the bip-0039 English word list. This process of transforming the private keys to 11-bit integer and mapping it to bip-0039 English word list will generate 24-word mnemic keys. The bip-0039 English word is made up of about 2048 random words in an array and can also be termed as seed phrase.

## Development
### Ethereum
A basic blockchain is implemented to demonstrate how some of the security implementations of general blockchain wallets are utilised.

### Algorand
The Algorand Blockchain Explorer will be used to demonstrate a real-life scenario of a transaction taking place on the testnet. A testnet is an instance of a blockchain powered by the same or a newer version of the underlying software, to be used for testing and experimentation without risk to real funds or the main chain. With the use of Docker, we can spin up a container defaulting to the testnet binaries to perform tests. This environment which we carry out the tests is also known as a sandbox, isolated from the mainnet.

Some scripts are written for the purpose of generating a wallet, setting up an account, importing an account into a wallet, etc.

## Usage
### Ethereum

### Algorand
1. Ensure Python3 and [Docker](https://docs.docker.com/get-docker/) is installed locally
2. Run the Docker Daemon
3. Run `./sandbox up testnet` to spin up a Docker container defaulting to the testnet binaries (`./sandbox down` to stop the Docker container). This might take a while as the network updates itself using fast catch up.
4. Run `python3 generateWallet.py` to create a wallet
5. Run `python3 importAcct.py` to import 2 custom accounts that have already been pre-loaded with some testnet credits.

## Resources
- [Ethereum](https://ethereum.org/en/)
- [Algorand](https://www.algorand.com/)
- [Etherscan](https://etherscan.io/)
- [Algosdk API](https://py-algorand-sdk.readthedocs.io/en/latest/)
- [Idea behind Mnemonic phrase and generating address](https://medium.com/mycrypto/the-journey-from-mnemonic-phrase-to-address-6c5e86e11e14)
- [How Bitcoin Wallets Work](https://www.youtube.com/watch?v=GSTiKjnBaes)
- [bip39 standard](https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki)
- [Generating Secure Crypto Wallets and Accounts](https://www.youtube.com/watch?v=x-P-nmhiO-g)

